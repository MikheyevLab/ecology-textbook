<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Add a &quot;barchart&quot; layer to a Bokeh figure</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for ly_bar {rbokeh}"><tr><td>ly_bar {rbokeh}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Add a &quot;barchart&quot; layer to a Bokeh figure</h2>

<h3>Description</h3>

<p>Add a &quot;barchart&quot; layer to a Bokeh figure
</p>


<h3>Usage</h3>

<pre>
ly_bar(fig, x = NULL, y = NULL, data = figure_data(fig), color = NULL,
  alpha = 1, hov_color = NULL, hov_alpha = NULL, ns_color = NULL,
  ns_alpha = NULL, sel_color = NULL, sel_alpha = NULL,
  position = c("stack", "fill", "dodge"), width = 0.9, hover = FALSE,
  origin = NULL, breaks = NULL, right = FALSE, binwidth = NULL,
  lname = NULL, lgroup = NULL, legend = TRUE, ...)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>fig</code></td>
<td>
<p>Figure to modify.</p>
</td></tr>
<tr valign="top"><td><code>x</code></td>
<td>
<p>Values or field name / expression for x variable, or if NULL, x-axis will be counts of y.</p>
</td></tr>
<tr valign="top"><td><code>y</code></td>
<td>
<p>Values or field name / expression for y variable, or if NULL, y-axis will be counts of x.</p>
</td></tr>
<tr valign="top"><td><code>data</code></td>
<td>
<p>An optional data frame, providing the source for inputs x, y, and color properties.</p>
</td></tr>
<tr valign="top"><td><code>color</code></td>
<td>
<p>Color for the glyph - a hex code (with no alpha) or any of the 147 named CSS colors, e.g 'green', 'indigo'. For glyphs with both fill and line properties, see &quot;Handling color&quot; below.</p>
</td></tr>
<tr valign="top"><td><code>alpha</code></td>
<td>
<p>The alpha transparency of the glyph between 0 (transparent) and 1 (opaque). If the glyph has both fill and color properties, see &quot;Handling alpha&quot; below.</p>
</td></tr>
<tr valign="top"><td><code>hov_color</code></td>
<td>
<p>Color for the glyph when it is hovered The same rules in the &quot;Handling color&quot; section apply.</p>
</td></tr>
<tr valign="top"><td><code>hov_alpha</code></td>
<td>
<p>The alpha transparency of the glyph when it is not hovered The same rules in the &quot;Handling alpha&quot; section apply.</p>
</td></tr>
<tr valign="top"><td><code>ns_color</code></td>
<td>
<p>Color for the glyph when it is not selected The same rules in the &quot;Handling color&quot; section apply.</p>
</td></tr>
<tr valign="top"><td><code>ns_alpha</code></td>
<td>
<p>The alpha transparency of the glyph when it is not not selected The same rules in the &quot;Handling alpha&quot; section apply.</p>
</td></tr>
<tr valign="top"><td><code>sel_color</code></td>
<td>
<p>Color for the glyph when it is selected. The same rules in the &quot;Handling color&quot; section apply.</p>
</td></tr>
<tr valign="top"><td><code>sel_alpha</code></td>
<td>
<p>The alpha transparency of the glyph when it is not selected. The same rules in the &quot;Handling alpha&quot; section apply.</p>
</td></tr>
<tr valign="top"><td><code>position</code></td>
<td>
<p>Either &quot;stack&quot;, &quot;fill&quot;, or &quot;dodge&quot; (see details).</p>
</td></tr>
<tr valign="top"><td><code>width</code></td>
<td>
<p>Width of each bar, a value between 0 (no width) and 1 (full width).</p>
</td></tr>
<tr valign="top"><td><code>hover</code></td>
<td>
<p>Logical indicating whether a hover tool should be added to show the value of each bar?</p>
</td></tr>
<tr valign="top"><td><code>origin, breaks, right, binwidth</code></td>
<td>
<p>Parameters to be used for binning x when it is continuous (not yet implemented).</p>
</td></tr>
<tr valign="top"><td><code>lname</code></td>
<td>
<p>Layer name.</p>
</td></tr>
<tr valign="top"><td><code>lgroup</code></td>
<td>
<p>Layer group.</p>
</td></tr>
<tr valign="top"><td><code>legend</code></td>
<td>
<p>Either a logical specifying not to plot a legend for this layer (FALSE) or a string indicating the name of the legend entry for this layer. Note that when mapping plot attributes to variables in <code>data</code>, a legend is automatically created and does not need to be specified. See &quot;Mapped plot attributes and legends&quot; below.</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>
<p>additional parameters for fine control over fill and line properties (see &quot;Additional parameters&quot; below)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function expects one of either x or y to be categorical and the other to be numeric or NULL.  The numeric variable is summed for each categorical variable and bars are plotted.  If no numeric variable is supplied, the unique values of the categorical variable will be tabulated.  Within each categorical variable, if color maps to another grouping variable then the bars are split up.  In this case, there are three ways to display the bars with the <code>position</code> argument.  The default, &quot;stack&quot; will stack the bars.  The &quot;fill&quot; choice will show the relative proportion for each group within each categorical variable level, stacking the bars.  The &quot;dodge&quot; choice will plot the bars for each level of the categorical variable side by side.
</p>


<h3>Handling color</h3>

<p>The <code>color</code> parameter is a high-level plot attribute that provides default behavior for coloring glyphs.
</p>

<ul>
<li><p> When using a glyph that only has line properties, this will be the color of the line.
</p>
</li>
<li><p> When using a glyph that has has line and fill properties, this will be the color of the line and the fill, with the alpha level of the fill reduced by 50%.
</p>
</li>
<li><p> If full control over fill and line color is desired, the <code>fill_color</code> and <code>line_color</code> attributes can be specified explicitly and will override <code>color</code>.
</p>
</li></ul>

<p>When color is <code>NULL</code> and <code>fill_color</code> or <code>line_color</code> are not specified, the color will be chosen from the theme.
</p>


<h3>Handling alpha</h3>

<p>The <code>alpha</code> is a high-level plot attribute that sets the transparency of the glyph being plotted.
</p>

<ul>
<li><p> When using a glyph that only has line properties, this will be the alpha of the line.
</p>
</li>
<li><p> When using a glyph that has has line and fill properties, this will be the alpha of the line and the alpha of the fill will be set to 50% of this value.
</p>
</li>
<li><p> Individual fill and line alpha can be specified with <code>fill_alpha</code> and <code>line_alpha</code> and will override <code>alpha</code>.
</p>
</li></ul>



<h3>Mapped plot attributes and legends</h3>

<p>When specifying an input data frame for a layer through the <code>data</code> argument, columns of <code>data</code> can be used to specify various plot attributes such as <code>color</code>, etc. For example, with <code>ly_points(..., data = iris, color = Species)</code>, the <code>Species</code> variable is used to determine how to color the points.  Here, <code>Species</code> is &quot;mapped&quot; to the <code>color</code> attribute.  Both continuous and categorical variables can be mapped.  In the case of continuous variables, the range is cut into slices and attributes are applied to each interval.  The mapping from the values of the variable to the actual plot attributes is determined based on the theme. When attributes are mapped, legend entries are automatically created for the mappings (when possible).
</p>


<h3>Additional parameters</h3>


<table summary="Rd table">
<tr>
 <td style="text-align: left;">
  <code>fill_color</code> </td><td style="text-align: left;"> color to use to fill the glyph with - a hex code (with no alpha) or any of the 147 named CSS colors, e.g 'green', 'indigo' </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>fill_alpha</code> </td><td style="text-align: left;"> transparency value between 0 (transparent) and 1 (opaque) </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>line_color</code> </td><td style="text-align: left;"> color to use to stroke lines with - a hex code (with no alpha) or any of the 147 named CSS colors, e.g 'green', 'indigo' </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>line_width</code> </td><td style="text-align: left;"> stroke width in units of pixels </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>line_alpha</code> </td><td style="text-align: left;"> transparency value between 0 (transparent) and 1 (opaque) </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>line_join</code> </td><td style="text-align: left;"> how path segments should be joined together 'miter' 'round' 'bevel' </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>line_cap</code> </td><td style="text-align: left;"> how path segments should be terminated 'butt' 'round' 'square' </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>line_dash</code> </td><td style="text-align: left;"> array of integer pixel distances that describe the on-off pattern of dashing to use </td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>line_dash_offset</code> </td><td style="text-align: left;"> the distance in pixels into the line_dash that the pattern should start from
 </td>
</tr>

</table>



<h3>See Also</h3>

<p>Other layer functions: <code><a href="ly_annular_wedge.html">ly_annular_wedge</a></code>,
<code><a href="ly_annulus.html">ly_annulus</a></code>, <code><a href="ly_arc.html">ly_arc</a></code>,
<code><a href="ly_bezier.html">ly_bezier</a></code>, <code><a href="ly_boxplot.html">ly_boxplot</a></code>,
<code><a href="ly_contour.html">ly_contour</a></code>, <code><a href="ly_crect.html">ly_crect</a></code>,
<code><a href="ly_curve.html">ly_curve</a></code>, <code><a href="ly_density.html">ly_density</a></code>,
<code><a href="ly_hist.html">ly_hist</a></code>, <code><a href="ly_image_url.html">ly_image_url</a></code>,
<code><a href="ly_image.html">ly_image</a></code>, <code><a href="ly_lines.html">ly_lines</a></code>,
<code><a href="ly_multi_line.html">ly_multi_line</a></code>, <code><a href="ly_oval.html">ly_oval</a></code>,
<code><a href="ly_patch.html">ly_patch</a></code>, <code><a href="ly_points.html">ly_points</a></code>,
<code><a href="ly_polygons.html">ly_polygons</a></code>, <code><a href="ly_quadratic.html">ly_quadratic</a></code>,
<code><a href="ly_quantile.html">ly_quantile</a></code>, <code><a href="ly_ray.html">ly_ray</a></code>,
<code><a href="ly_rect.html">ly_rect</a></code>, <code><a href="ly_segments.html">ly_segments</a></code>,
<code><a href="ly_text.html">ly_text</a></code>, <code><a href="ly_wedge.html">ly_wedge</a></code>
</p>


<h3>Examples</h3>

<pre>
# ly_bar
figure() %&gt;%
  ly_bar(variety, data = lattice::barley) %&gt;%
  theme_axis("x", major_label_orientation = 90)

# total yield per variety
figure() %&gt;%
  ly_bar(variety, yield, data = lattice::barley, hover = TRUE) %&gt;%
  theme_axis("x", major_label_orientation = 90)

# swap axes and add hover
figure() %&gt;%
  ly_bar(yield, variety, data = lattice::barley, hover = TRUE)
# TODO: fix hover

# stack by year
figure() %&gt;%
  ly_bar(variety, yield, color = year, data = lattice::barley, hover = TRUE) %&gt;%
  theme_axis("x", major_label_orientation = 90)

# proportional bars
figure() %&gt;%
  ly_bar(variety, yield, color = year,
    data = lattice::barley, position = "fill", width = 1) %&gt;%
  theme_axis("x", major_label_orientation = 90)

# swap axes and
figure() %&gt;%
  ly_bar(yield, variety, color = year,
    data = lattice::barley, position = "fill")

# side by side bars
figure() %&gt;%
  ly_bar(variety, yield, color = year,
    data = lattice::barley, position = "dodge") %&gt;%
  theme_axis("x", major_label_orientation = 90)
</pre>

<hr /><div style="text-align: center;">[Package <em>rbokeh</em> version 0.6.3 <a href="00Index.html">Index</a>]</div>
</body></html>
